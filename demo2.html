<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—èªé»æ“Šå­¸ç¿’ Demo (MVP)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f4f4f9;
            color: #333;
        }
        #game-container {
            width: 90%;
            max-width: 600px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        #progress-bar {
            height: 10px;
            background-color: #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        #progress {
            height: 100%;
            width: 0%;
            background-color: #4CAF50;
            border-radius: 5px;
            transition: width 0.5s ease-in-out;
        }
        #audio-hint {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #333;
        }
        #options-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 30px;
        }
        .option-block {
            padding: 20px 10px;
            background-color: #007bff;
            color: white;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            /* æ¨¡æ“¬åœ–ç‰‡å€å¡Šï¼Œå¯¦éš›å°ˆé¡Œä¸­æœƒæ›¿æ›æˆ <img src="..."> */
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .option-block:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        /* éŒ¯èª¤é»æ“Šçš„åé¥‹æ¨£å¼ */
        .wrong-answer {
            animation: shake 0.5s;
            background-color: #dc3545 !important;
        }
        @keyframes shake {
            0%, 100% {transform: translateX(0);}
            20%, 60% {transform: translateX(-10px);}
            40%, 80% {transform: translateX(10px);}
        }
        .final-screen {
            font-size: 1.5em;
            color: #28a745;
            margin-top: 50px;
        }
        #replay-button {
            padding: 10px 20px;
            margin-top: 20px;
            background-color: #ffc107;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }
    </style>
</head>
<body>

<div id="game-container">
    <h1>æ—èªå­¸ç¿’éŠæˆ² Demo</h1>
    <div id="progress-bar"><div id="progress"></div></div>
    
    <div id="audio-hint">é»æ“Šä¸‹æ–¹çš„å–‡å­åœ–æ¨™ï¼Œé–‹å§‹è½å–ç¬¬ä¸€å€‹å–®å­—ã€‚</div>

    <button id="play-button" onclick="playAudio()" style="padding: 15px; font-size: 1.5em; cursor: pointer; background-color: #6c757d; color: white; border: none; border-radius: 50%;">ğŸ”Š</button>

    <div id="options-container">
        </div>
    
    <div id="feedback" style="margin-top: 20px; font-size: 1.2em;"></div>
</div>

<script>
// ----------------------------------------------------------------------
// æ­¥é©Ÿ 1: éŠæˆ²è³‡æ–™è¨­å®š - é€™è£¡æ”¾ç½®ä½ çš„æ‰€æœ‰å–®å­—ã€éŸ³æª”å’Œé¸é …
// ----------------------------------------------------------------------
// æ³¨æ„ï¼šåœ¨ä½ çš„å°ˆé¡Œä¸­ï¼Œä½ éœ€è¦å°‡ audioFile æ›¿æ›æˆçœŸå¯¦çš„æ—èªèªéŸ³æª”è·¯å¾‘
// ä¾‹å¦‚ï¼šnew Audio('audio/mama.mp3')
const gameData = [
    {
        word: "åª½åª½",
        audioFile: "mama.mp3", // èªéŸ³æª”è·¯å¾‘ä½”ä½ç¬¦
        correctText: "åª½åª½", // æ­£ç¢ºç­”æ¡ˆçš„æ–‡å­—æç¤º
        // ç‚ºäº† Demo ç°¡å–®ï¼Œé¸é …å›ºå®šï¼Œä½†å¯¦éš›å°ˆé¡Œæ‡‰åŒ…å«åœ–ç‰‡URL
        options: [
            { text: "åª½åª½", isCorrect: true }, 
            { text: "èŠ‹é ­", isCorrect: false }, 
            { text: "å¤ªé™½", isCorrect: false }
        ]
    },
    {
        word: "èŠ‹é ­",
        audioFile: "taro.mp3",
        correctText: "èŠ‹é ­",
        options: [
            { text: "å¤ªé™½", isCorrect: false },
            { text: "èŠ‹é ­", isCorrect: true },
            { text: "åª½åª½", isCorrect: false }
        ]
    },
    {
        word: "å¤ªé™½",
        audioFile: "sun.mp3",
        correctText: "å¤ªé™½",
        options: [
            { text: "åª½åª½", isCorrect: false },
            { text: "èŠ‹é ­", isCorrect: false },
            { text: "å¤ªé™½", isCorrect: true }
        ]
    }
];

let currentLevel = 0; // ç•¶å‰é—œå¡ç´¢å¼•
const totalLevels = gameData.length;
const optionsContainer = document.getElementById('options-container');
const progressElement = document.getElementById('progress');
const feedbackElement = document.getElementById('feedback');
const audioHintElement = document.getElementById('audio-hint');
const playButton = document.getElementById('play-button');
let currentAudio = null; // ç”¨ä¾†å­˜æ”¾ç•¶å‰æ’­æ”¾çš„ Audio ç‰©ä»¶

// ----------------------------------------------------------------------
// æ­¥é©Ÿ 2: æ ¸å¿ƒåŠŸèƒ½ - æ’­æ”¾éŸ³æª”
// ----------------------------------------------------------------------
function playAudio() {
    if (currentLevel >= totalLevels) return; // éŠæˆ²çµæŸ
    
    const currentData = gameData[currentLevel];
    
    // --- ã€å¯¦éš›å°ˆé¡Œæ›¿æ›ç¨‹å¼ç¢¼ï¼šæ’­æ”¾éŸ³æª”ã€‘ ---
// 1. å»ºç«‹èªéŸ³æª”è·¯å¾‘
const audioPath = 'audio/' + currentData.audioFile;
currentAudio = new Audio(audioPath);

// 2. æ’­æ”¾èªéŸ³
currentAudio.play().catch(error => {
    console.error("Audio playback failed:", error);
    // å¦‚æœæ’­æ”¾å¤±æ•—ï¼Œå¯èƒ½æ˜¯ç€è¦½å™¨é™åˆ¶ï¼ˆä¾‹å¦‚æ²’æœ‰ç”¨æˆ¶äº’å‹•ï¼‰ï¼Œçµ¦äºˆæç¤º
    alert("èªéŸ³æ’­æ”¾å¤±æ•—ï¼Œè«‹ç¢ºèªéŸ³æª”æª”æ¡ˆåç¨±èˆ‡è·¯å¾‘æ˜¯å¦æ­£ç¢ºï¼Œæˆ–åœ¨ç•«é¢ä¸Šé»æ“Šä¸€ä¸‹ã€‚");
});
// ------------------------------------------

    audioHintElement.textContent = `è«‹é»æ“Šå°æ‡‰æ­¤ç™¼éŸ³çš„æ–¹å¡Š (æ—èªç™¼éŸ³ä¸­...)`;
    playButton.disabled = true; // æ’­æ”¾æ™‚ç¦æ­¢é‡è¤‡é»æ“Š
    setTimeout(() => { playButton.disabled = false; }, 2000); // 2ç§’å¾Œå…è¨±å†æ¬¡é»æ“Š
}

// ----------------------------------------------------------------------
// æ­¥é©Ÿ 3: æ ¸å¿ƒåŠŸèƒ½ - æª¢æŸ¥ç­”æ¡ˆ
// ----------------------------------------------------------------------
function checkAnswer(isCorrect, blockElement) {
    if (currentLevel >= totalLevels) return;

    if (isCorrect) {
        // ç­”å°äº†ï¼šçµ¦äºˆæ­£å‘åé¥‹ï¼Œé€²å…¥ä¸‹ä¸€é—œ
        feedbackElement.textContent = "âœ… ç­”å°äº†ï¼é€²å…¥ä¸‹ä¸€é—œï¼";
        setTimeout(nextLevel, 1000); // 1ç§’å¾Œåˆ‡æ›é—œå¡
    } else {
        // ç­”éŒ¯äº†ï¼šçµ¦äºˆéŒ¯èª¤åé¥‹ï¼Œé‡æ–°æ’­æ”¾èªéŸ³
        feedbackElement.textContent = "âŒ ç­”éŒ¯äº†ï¼è«‹å†è½ä¸€æ¬¡ã€‚";
        blockElement.classList.add('wrong-answer');
        
        // ç§»é™¤éŒ¯èª¤å‹•ç•«
        setTimeout(() => {
            blockElement.classList.remove('wrong-answer');
        }, 500);
        
        // é‡æ–°æ’­æ”¾èªéŸ³
        setTimeout(playAudio, 1000); 
    }
}

// ----------------------------------------------------------------------
// æ­¥é©Ÿ 4: æ ¸å¿ƒåŠŸèƒ½ - æ¸²æŸ“/åˆ‡æ›é—œå¡
// ----------------------------------------------------------------------
function renderLevel() {
    if (currentLevel >= totalLevels) {
        // éŠæˆ²çµæŸ
        optionsContainer.innerHTML = `<div class="final-screen">æ­å–œï¼ä½ å·²å®Œæˆæ‰€æœ‰é—œå¡ï¼<br>ğŸ‰ å°ˆé¡Œ Demo æˆåŠŸé‹è¡Œ ğŸ‰</div>`;
        feedbackElement.textContent = "";
        playButton.style.display = 'none';
        audioHintElement.textContent = "é»æ“Šä¸‹æ–¹çš„æŒ‰éˆ•é‡æ–°é–‹å§‹ã€‚";
        
        const restartButton = document.createElement('button');
        restartButton.id = 'replay-button';
        restartButton.textContent = 'é‡æ–°é–‹å§‹';
        restartButton.onclick = () => { currentLevel = 0; startGame(); };
        optionsContainer.appendChild(restartButton);
        
        updateProgress();
        return;
    }

    const currentData = gameData[currentLevel];
    optionsContainer.innerHTML = ''; // æ¸…ç©ºé¸é …
    feedbackElement.textContent = "";
    playButton.style.display = 'block';

    // æ¸²æŸ“é¸é …æ–¹å¡Š
    currentData.options.forEach(option => {
        const block = document.createElement('div');
        block.classList.add('option-block');
        block.textContent = option.text; // Demo ä½¿ç”¨æ–‡å­—ï¼Œä½ çš„å°ˆé¡Œé€™è£¡æœƒæ˜¯åœ–ç‰‡
        
        // ç¶å®šé»æ“Šäº‹ä»¶
        block.onclick = () => checkAnswer(option.isCorrect, block);
        
        optionsContainer.appendChild(block);
    });

    updateProgress();
    playAudio(); // é€²å…¥æ–°é—œå¡å¾Œï¼Œè‡ªå‹•æ’­æ”¾èªéŸ³
}

// ----------------------------------------------------------------------
// æ­¥é©Ÿ 5: é€²åº¦æ¢æ›´æ–°
// ----------------------------------------------------------------------
function updateProgress() {
    const percentage = (currentLevel / totalLevels) * 100;
    progressElement.style.width = `${percentage}%`;
}

// ----------------------------------------------------------------------
// æ­¥é©Ÿ 6: æµç¨‹æ§åˆ¶
// ----------------------------------------------------------------------
function nextLevel() {
    currentLevel++;
    renderLevel();
}

function startGame() {
    currentLevel = 0;
    renderLevel();
}

// éŠæˆ²é–‹å§‹
window.onload = startGame;
</script>
</body>
</html>